(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"14ab":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=function(){i.e("components/xfl-select/xfl-select").then(function(){return resolve(i("7609"))}.bind(null,i)).catch(i.oe)},s=i("02c4"),c={components:{xflSelect:o},data:function(){return{banner:[],compayList:[],postList:[],city:"",selectValue:"",arealist:[],areaStrList:[],cityList:[],hyList:[],searchSelect:!1,imgUrl:"",form:{page:1,size:10,type:"",name:"",areaId:null,industryId:"",cityName:""},total:null,searchType:1,nowProIndex:0,cityShow:!1,flag:!1,debug:""}},onLoad:function(){this.imgUrl=this.$imgUrl,n=new s({key:"ZTFBZ-BYK6S-BHIO3-6DRD3-FCYBH-D7F5U"}),this.getCity(),this.getcitylsit(),setTimeout((function(){}),5e3),t.clearStorageSync("hyTpe")},onShow:function(){if(this.getBannr(),2==this.searchType){var e=t.getStorageSync("hyTpe");(e||""==e)&&(this.form.industryId=e)}this.init()},watch:{selectValue:function(t,e){console.log(t),this.selectValue=t}},methods:{getCity:function(){var e=this;console.log("获取位置"),t.getLocation({type:"wgs84",geocode:!0,fail:function(t){console.log("获取位置错误"),console.log(t),e.debug="获取位置错误"+JSON.stringify(t)},success:function(i){console.log(i);var o=i.latitude,s=i.longitude;n.reverseGeocoder({location:{latitude:o,longitude:s},success:function(i){console.log(i);i.result.ad_info.province;var n=i.result.ad_info.city;e.city=n,e.selectValue=i.result.ad_info.district,t.setStorageSync("city",e.city),e.getcitylsit(),e.debug="获取城市成功"},fail:function(t){e.debug="获取中文位置失败"+JSON.stringify(t),console.log(t)},complete:function(t){}})}})},getBannr:function(){var t=this;this.$http.post("hbanner/list").then((function(e){100==e.code&&(t.banner=e.info)}))},getCompanyList:function(){var e=this;this.$http.post("hhome/list",this.form).then((function(i){if(100==i.code){var n=i.info.rows;e.total=i.info.total,1==e.form.page&&(e.compayList=[]),n.forEach((function(t,i){e.compayList.push(t)})),t.stopPullDownRefresh(),setTimeout((function(){e.flag=!0}),1e3)}}))},getcitylsit:function(){var t=this;this.$http.post("mDict/areaTree").then((function(e){if(100==e.code){var i=e.info;i.forEach((function(t,e){var i=t.children;i.forEach((function(t,e){t.children.unshift({label:"全部",value:"",children:null})}))})),t.cityList=i,console.log("36412121"),console.log(i),t.regCity(t.city)}}))},getHy:function(){var t=this;this.$http.post("mDict/getByTypeCode",{typeCode:"04"}).then((function(e){100==e.code&&(t.hyList=e.info,t.hyList=t.hyList.slice(0,7))}))},regCity:function(e){var i=this,n=this.cityList;console.log("323232323"),console.log(this.cityList);var o=0;this.areaStrList=[],console.log(e),n.forEach((function(t,n){t.children.forEach((function(t,n){if(t.label==e){if(o=1,i.arealist=t.children,t.children.length>0){var s=t.children,c=0;s.forEach((function(t,e){i.areaStrList.push(t.label)})),0==c&&(i.form.areaId=s[0].value,i.selectValue=s[0].label)}else i.form.areaId="",i.selectValue="";i.init()}}))})),0==o&&(console.log("2222"),this.city="武汉市",this.regCity("武汉市"),t.setStorageSync("city",this.city))},init:function(){this.flag=!1,this.form.cityName=this.city,1==this.searchType?this.getCompanyList():this.getPost()},getPost:function(){var e=this;this.$http.post("hpsot/list",this.form).then((function(i){if(100==i.code){e.total=i.info.total,1==e.form.page&&(e.postList=[]);var n=i.info.rows;n.forEach((function(i,n){i.treatmentStart=i.treatmentStart,i.treatmentEnd=i.treatmentEnd,i.keyWord=JSON.parse(i.keyWord),i.keyWord=i.keyWord.slice(0,2),i.welfare=JSON.parse(i.welfare),i.welfare=i.welfare.slice(0,2),e.postList.push(i),t.stopPullDownRefresh(),setTimeout((function(){e.flag=!0}),1e3)}))}}))},changeSearchType:function(t){this.searchType=t,this.searchSelect=!1;this.form.areaId;this.form.page=1,1==t&&(this.form.industryId=""),2==t&&0==this.hyList.length&&this.getHy(),this.init()},changeHy:function(t){this.form.industryId=t,this.init()},goSearch:function(){var e="";e=this.form.industryId?this.form.industryId:"",t.navigateTo({url:"../../components/pages/search?code=04&industryId="+e})},selectChange:function(e){console.log(e);var i=e.index;this.form.areaId=this.arealist[i].value,this.init();var n={};n.value=this.form.areaId,n.str=e.newVal,n=JSON.stringify(n),t.setStorageSync("areaInfo",n)},changeComType:function(t){this.form.type=t,this.form.page=1,this.form.name="",this.form.industryId="",this.init()},changeCity:function(e){console.log(e),this.city=e.label,this.regCity(e.label),t.setStorageSync("city",e.label),this.cityShow=!1},lookCompany:function(e){t.navigateTo({url:"../../components/pages/enterprise?id="+e.id})},lookPostDetails:function(e){t.navigateTo({url:"../../components/pages/post?id="+e})}},onReachBottom:function(){var t=null;t=1==this.searchType?this.compayList.length:this.postList.length,this.total>t&&(this.form.page++,this.init())},onPullDownRefresh:function(){this.cityList.length>0?this.flag&&(this.form.page=1,this.form.name="",this.form.industryId="",this.init()):(console.log("000000000000000"),this.getcitylsit(),this.getBannr())},onShareAppMessage:function(t){return{title:"铭聚人力",path:"pages/index/index"}}};e.default=c}).call(this,i("543d")["default"])},"4b3f":function(t,e,i){"use strict";i.r(e);var n=i("94e6"),o=i("6763");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("bd59");var c,a=i("f0c5"),r=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"046080e1",null,!1,n["a"],c);e["default"]=r.exports},6763:function(t,e,i){"use strict";i.r(e);var n=i("14ab"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"85f5":function(t,e,i){},"94e6":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={xflSelect:function(){return i.e("components/xfl-select/xfl-select").then(i.bind(null,"7609"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.cityShow=!0},t.e1=function(e){t.cityShow=!0},t.e2=function(e){t.searchSelect=!t.searchSelect},t.e3=function(e,i){var n=arguments[arguments.length-1].currentTarget.dataset,o=n.eventParams||n["event-params"];i=o.index;t.nowProIndex=i},t.e4=function(e){t.cityShow=!1})},s=[]},bd59:function(t,e,i){"use strict";var n=i("85f5"),o=i.n(n);o.a},f2ea:function(t,e,i){"use strict";(function(t){i("e2d3");n(i("66fd"));var e=n(i("4b3f"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])}},[["f2ea","common/runtime","common/vendor"]]]);